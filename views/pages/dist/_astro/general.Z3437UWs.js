import{S as T,i as E,s as M,e as h,d as b,h as x,j as _,k as y,g as k,l as w,m as n,o as z,p,D as S,q as C,L as D,H as L,M as I,z as q}from"./index.QcQi6ZyB.js";function H(c){let t,o,u='<div class="flex w-full justify-start text-sm"><div class="w-fit max-w-[70%] rounded-e-md rounded-tl-md bg-zinc-100 p-3 flex flex-col gap-2"><span class="text-xs text-sky-600 font-semibold w-fit">@ahmadhabibi14</span> <p class="text-ellipsis break-all">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p></div></div>',f,a,e,i,l,g="Send",s,m;return{c(){t=h("div"),o=h("div"),o.innerHTML=u,f=b(),a=h("div"),e=h("textarea"),i=b(),l=h("button"),l.textContent=g,this.h()},l(d){t=x(d,"DIV",{class:!0});var r=_(t);o=x(r,"DIV",{class:!0,"data-svelte-h":!0}),y(o)!=="svelte-ekkuzv"&&(o.innerHTML=u),f=k(r),a=x(r,"DIV",{class:!0});var v=_(a);e=x(v,"TEXTAREA",{name:!0,id:!0,cols:!0,rows:!0,placeholder:!0}),_(e).forEach(w),i=k(v),l=x(v,"BUTTON",{class:!0,"data-svelte-h":!0}),y(l)!=="svelte-fet6eg"&&(l.textContent=g),v.forEach(w),r.forEach(w),this.h()},h(){n(o,"class","flex flex-col gap-2 min-h-full h-full p-6"),n(e,"name","message"),n(e,"id","message"),n(e,"cols","30"),n(e,"rows","10"),n(e,"placeholder",""),n(l,"class","bg-lime-600 hover:bg-lime-500 cursor-pointer text-white py-2 px-5 rounded-md"),n(a,"class","-ml-[2px] w-[700px] p-6 fixed flex flex-row gap-3 items-stretch bottom-0 h-20 max-h-32 bg-white border-t-[2px] border-x-[2px] border-zinc-100"),n(t,"class","min-h-full h-full relative")},m(d,r){z(d,t,r),p(t,o),p(t,f),p(t,a),p(a,e),S(e,c[0]),p(a,i),p(a,l),s||(m=[C(e,"input",c[3]),C(l,"click",D(c[1]))],s=!0)},p(d,[r]){r&1&&S(e,d[0])},i:L,o:L,d(d){d&&w(t),s=!1,I(m)}}}function N(c,t,o){let{username:u=""}=t;const f=new URL(window.location.href);let a=`ws://${window.location.host}/api/room-general`;f.protocol.includes("s")&&(a=`wss://${window.location.host}/api/room-general`);let e=new WebSocket(a);q(()=>{localStorage.setItem("username",u)}),e.onopen=()=>{console.log("Connected to the room chat")},e.onmessage=s=>{const m=JSON.parse(s.data);console.log(m)},e.onclose=s=>{console.log("Closed:",s)};let i="";function l(){const s={type:"text",content:i};try{e.send(JSON.stringify(s)),console.log("Payload:",s)}catch(m){console.log(m)}}function g(){i=this.value,o(0,i)}return c.$$set=s=>{"username"in s&&o(2,u=s.username)},[i,l,u,g]}class R extends T{constructor(t){super(),E(this,t,N,H,M,{username:2})}}export{R as default};
